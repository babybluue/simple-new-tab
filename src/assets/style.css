@import "tailwindcss";

* {
  box-sizing: border-box;
}

:root {
  font-family: 'Noto Sans', 'Noto Sans SC', Consolas, PingFang SC, Helvetica Neue, Microsoft YaHei, sans-serif;

  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  /* 背景色由 HTML 内联脚本控制，避免闪烁 */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  /* 彻底禁用系统滚动条，由 App.vue 容器处理 */
  /* 背景色由 HTML 内联脚本和内联样式控制，避免闪烁 */
}

#app {
  width: 100%;
  height: 100%;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    /* 背景色由 HTML 内联脚本控制，避免闪烁 */
  }
}

/* 主题文字颜色 CSS 变量 - 默认 dark 模式 */
:root {
  --app-text-color: rgba(255, 255, 255, 0.95);
  --app-text-color-secondary: rgba(255, 255, 255, 0.8);
  --app-text-color-tertiary: rgba(255, 255, 255, 0.65);
  --app-text-muted: rgba(255, 255, 255, 0.6);

  /* 主色默认值（不再使用历史默认色兜底） */
  --primary-color: #343639;
  --primary-surface: #343639;

  /* 输入相关：轻量 focus 提示（caret + placeholder） */
  --app-caret-color: color-mix(in srgb, var(--primary-color) 15%, #3b82f6);

  /* 背景和边框颜色变量 */
  /* 让 overlay 表面轻微跟随主色（不直接变成纯主色，避免可读性问题） */
  --app-bg-overlay: color-mix(in srgb, var(--primary-color) 50%, #1f2937);
  --app-bg-overlay-hover: color-mix(in srgb, var(--primary-color) 22%, #374151);
  --app-border-color: rgba(255, 255, 255, 0.15);
  --app-border-color-hover: rgba(255, 255, 255, 0.3);

  /* 视觉 token（阴影/焦点） */
  --app-shadow-xs: 0 1px 6px rgba(0, 0, 0, 0.16);
  --app-shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.22);
  --app-shadow-md: 0 10px 28px rgba(0, 0, 0, 0.28);
  --app-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.38);
  --app-focus-ring: rgba(102, 126, 234, 0.35);
  --app-focus-ring: color-mix(in srgb, var(--primary-color) 45%, transparent);
}

/* Light 模式变量 */
.light {
  --app-text-color: rgba(33, 53, 71, 0.95);
  --app-text-color-secondary: rgba(33, 53, 71, 0.8);
  --app-text-color-tertiary: rgba(33, 53, 71, 0.65);
  --app-text-muted: rgba(33, 53, 71, 0.6);

  --primary-color: #ffffff;
  --primary-surface: #ffffff;

  /* 修复浅色主题下 focus ring 变成“白色光晕”，导致看起来像额外 padding */
  --app-focus-ring: rgba(59, 130, 246, 0.35);

  --app-bg-overlay: color-mix(in srgb, var(--primary-color) 10%, rgba(255, 255, 255, 0.85));
  --app-bg-overlay-hover: color-mix(in srgb, var(--primary-color) 14%, rgba(255, 255, 255, 0.95));
  --app-border-color: rgba(33, 53, 71, 0.25);
  --app-border-color-hover: rgba(33, 53, 71, 0.35);

  --app-shadow-xs: 0 1px 6px rgba(0, 0, 0, 0.06);
  --app-shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.08);
  --app-shadow-md: 0 10px 28px rgba(0, 0, 0, 0.10);
  --app-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.14);
}

/* Dark 模式变量 */
.dark {
  --app-text-color: rgba(255, 255, 255, 0.95);
  --app-text-color-secondary: rgba(255, 255, 255, 0.8);
  --app-text-color-tertiary: rgba(255, 255, 255, 0.65);
  --app-text-muted: rgba(255, 255, 255, 0.6);

  --primary-color: #343639;
  --primary-surface: #343639;

  --app-bg-overlay: color-mix(in srgb, var(--primary-color) 16%, #1f2937);
  --app-bg-overlay-hover: color-mix(in srgb, var(--primary-color) 22%, #374151);
  --app-border-color: rgba(255, 255, 255, 0.15);
  --app-border-color-hover: rgba(255, 255, 255, 0.3);

  --app-shadow-xs: 0 1px 6px rgba(0, 0, 0, 0.16);
  --app-shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.22);
  --app-shadow-md: 0 10px 28px rgba(0, 0, 0, 0.28);
  --app-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.38);
}

/* 主题只影响 App.vue 中的字体颜色，不影响背景色 */
.app-main {
  color: var(--app-text-color);
}

/* 工具类：使用 CSS 变量的文本颜色 */
.text-app {
  color: var(--app-text-color);
}

.text-app-secondary {
  color: var(--app-text-color-secondary);
}

.text-app-tertiary {
  color: var(--app-text-color-tertiary);
}

.text-app-muted {
  color: var(--app-text-muted);
}

/* 输入框：轻量 focus 提示（不改变外层容器外观） */
.caret-app {
  caret-color: var(--app-caret-color);
}

.input-focus-subtle::placeholder {
  transition: color 160ms ease;
}

.input-focus-subtle:focus::placeholder {
  color: color-mix(in srgb, var(--app-text-color-tertiary) 35%, transparent);
}

/* 工具类：使用 CSS 变量的背景和边框 */
.bg-app-overlay {
  background-color: var(--app-bg-overlay);
}

.bg-app-overlay-hover:hover {
  background-color: var(--app-bg-overlay-hover);
}

.border-app {
  border-color: var(--app-border-color);
}

.border-app-hover:hover {
  border-color: var(--app-border-color-hover);
}

/* 下拉菜单和弹窗样式 */
.menu-app {
  background-color: var(--app-bg-overlay);
  border-color: var(--app-border-color);
  color: var(--app-text-color);
}

/* 不透明菜单背景：用于避免 overlay/blur 导致的层叠“透出”问题 */
.menu-app-opaque {
  background-color: var(--primary-surface);
  backdrop-filter: none;
}

.menu-item-app {
  color: var(--app-text-color);
}

.menu-item-app:hover {
  background-color: var(--app-bg-overlay-hover);
}

.menu-item-app-active {
  background-color: var(--app-bg-overlay-hover);
}

/* 浅色主题下：搜索建议条目 hover/active 背景更明显（仅作用于建议列表） */
.light [data-suggestions-menu] .menu-item-app:hover,
.light [data-suggestions-menu] .menu-item-app-active {
  background-color: rgba(33, 53, 71, 0.10);
}

/* 主要操作 badge：保证在任意主色/主题下都具备可读性 */
.badge-primary {
  color: var(--app-text-color);
  border: 1px solid color-mix(in srgb, var(--primary-color) 55%, var(--app-border-color));
  background-color: color-mix(in srgb, var(--primary-color) 18%, transparent);
}